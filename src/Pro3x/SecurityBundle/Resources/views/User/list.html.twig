{% extends '::base.html.twig' %}

{% block page_title %}<span class="pro3x_small_icon pro3x_small_icon_users"></span>Popis Korisnika{% endblock %}

{% block body %}
    <div class="grid_12">
	
	{% include '::message.html.twig' %}
	
	<table class="ui-widget-content ui-corner-all pro3x">
	    <thead>
		<tr>
		    {% if is_granted('ROLE_OIB') %}
			<th class="ui-widget-header ui-corner-all">Oib</th>
		    {% endif %}
		    <th class="ui-widget-header ui-corner-all">Korisničko ime</th>
		    <th class="ui-widget-header ui-corner-all">Elektronička pošta</th>
		    <th class="ui-widget-header ui-corner-all">Aktivan</th>
		    <th class="ui-widget-header ui-corner-all">Omogućen</th>
		    <th class="ui-widget-header ui-corner-all">Alati</th>
		</tr>
	    </thead>
	{% for user in users %}
	    <tr>
		{% if is_granted('ROLE_OIB') %}
		    <td>{{ user.oib }}</td>
		{% endif %}
		<td>{{ user.username }}</td>
		<td>{{ user.email }}</td>
		<td><span class="ui-icon {{ user.active?'ui-icon-check':'ui-icon-closethick' }}"></span></td>
		<td><span class="ui-icon {{ user.enabled?'ui-icon-check':'ui-icon-closethick' }}"></span></td>
		<td class="pro3x_tools">
		    <a href="{{ path('edit_permissions', {'id': user.id, 'back': app.request.uri}) }}">dozvole</a>
		    <a href="{{ path('edit_user', {'id': user.id, 'back': app.request.uri }) }}">izmjeni</a>
		    <a class="pro3x_confirm" data-icon="pro3x_icon_user_delete" data-msg="Jeste li sigurni da želite izbrisati korisnika <b>{{ user.username }}</b>?" href="{{ path('delete_user', {'id': user.id, 'back': app.request.uri}) }}">izbriši</a>
		</td>
	    </tr>
	{% else %}
	    <tr>
		<td class="pro3x_no_data" colspan="100">Nema rezultata</td>
	    </tr>
	{% endfor %}
	</table>
    </div>

    <div class="grid_6">
	<div class="pro3x_table_buttons" style="margin-top: 0.6em;">
	    <input type="button" data-href="{{ path('add_user', {'back': app.request.uri}) }}" class="button link" value="Dodaj" />
	    <input type="button" data-href="{{ path('dashboard') }}" class="button link" value="Odustani" />
	</div>
    </div>

    {% include '::pager.html.twig' with {'count': count, 'page': page} %}

    <div class="pro3x_dialog" title="Upozorenje!"></div>

{% endblock %}

{% block javascripts %}{% endblock %}